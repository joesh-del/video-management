{% extends "base.html" %}

{% block title %}Videos - MV Videos{% endblock %}

{% block content %}
<style>
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    .page-header h1 {
        margin: 0;
    }
    .video-count {
        color: #666;
        font-size: 0.875rem;
    }
    .filters {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }
    .filters input {
        flex: 1;
        max-width: 300px;
        padding: 0.5rem 0.75rem;
        border: 1px solid #e5e4df;
        border-radius: 6px;
        font-size: 0.875rem;
        background: #fff;
    }
    .filters input:focus {
        outline: none;
        border-color: #d97757;
    }
    .data-table {
        width: 100%;
        background: #fff;
        border: 1px solid #e5e4df;
        border-radius: 8px;
        overflow: hidden;
        font-size: 0.8125rem;
    }
    .data-table th {
        background: #faf9f7;
        padding: 0.625rem 0.75rem;
        text-align: left;
        font-weight: 500;
        color: #666;
        font-size: 0.6875rem;
        text-transform: uppercase;
        letter-spacing: 0.03em;
        border-bottom: 1px solid #e5e4df;
    }
    .data-table td {
        padding: 0.625rem 0.75rem;
        border-bottom: 1px solid #f0efea;
        vertical-align: middle;
    }
    .data-table tr:hover {
        background: #faf9f7;
    }
    .data-table tr:last-child td {
        border-bottom: none;
    }
    .video-title {
        font-weight: 500;
        color: #1a1a1a;
        max-width: 300px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    .badge-sm {
        display: inline-block;
        padding: 0.125rem 0.375rem;
        border-radius: 3px;
        font-size: 0.625rem;
        font-weight: 600;
        text-transform: uppercase;
    }
    .badge-sm.success {
        background: #e6f4ea;
        color: #1e7e34;
    }
    .badge-sm.pending {
        background: #fef7e0;
        color: #9a6700;
    }
    .duration {
        font-family: 'SF Mono', Monaco, monospace;
        color: #d97757;
        font-size: 0.75rem;
    }
    .date-cell {
        color: #666;
        font-size: 0.75rem;
    }
    .speaker-cell {
        color: #444;
    }
    .pagination {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 1rem;
    }
    main {
        max-width: 1100px;
    }
</style>

<div class="page-header">
    <h1>Videos</h1>
    <span class="video-count">{{ videos|length }} videos</span>
</div>

<form class="filters" method="GET" action="/videos">
    <input type="text" name="q" value="{{ search_query }}" placeholder="Search videos...">
    <button type="submit" class="btn">Search</button>
    {% if search_query %}
    <a href="/videos" class="btn btn-secondary">Clear</a>
    {% endif %}
</form>

{% if videos %}
<table class="data-table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Speaker</th>
            <th>Event</th>
            <th>Date</th>
            <th>Duration</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for video in videos %}
        <tr>
            <td><span class="video-title" title="{{ video.filename }}">{{ video.filename.replace('.mp4', '') }}</span></td>
            <td class="speaker-cell">{{ video.speaker or '—' }}</td>
            <td>{{ video.event_name or '—' }}</td>
            <td class="date-cell">{{ video.event_date.strftime('%Y-%m-%d') if video.event_date else '—' }}</td>
            <td><span class="duration">{{ video.duration|duration }}</span></td>
            <td>
                {% if video.has_transcript %}
                <span class="badge-sm success">Transcribed</span>
                {% else %}
                <span class="badge-sm pending">Pending</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="empty-state">
    <h2>No videos</h2>
    <p>Upload videos to get started</p>
</div>
{% endif %}
{% endblock %}
